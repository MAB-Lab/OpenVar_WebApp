<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>OpenVar analysis</title>
		<link rel="stylesheet" href="static/css/Submit_stylesheet.css" />
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="static/js/OPV_submit.js"></script>
	</head>
	<body>

		{% extends "OPV_navbar.html" %}
		{% block content %}

		<div class="submit_grid">
			<h1>Welcome to OpenVar!</h1>

			<form method="POST" class="form__user" id="user_input__submitform">
				<div class="form__info">
					<p><b>Submission information:</b> <br> <br> The <b>email address</b> will be used to send you a unique link to the results of the analysis. <br> The <b>study name</b> will be used to identify your analysis report.</p>
				</div>
				<div class="form__email">
					{{ form.user_input.email.label() }}
					{{ form.user_input.email }}
					<div id="email_error_msg" class="error_msg" role="alert" style="display:none;"></div>
				</div>
				<div class="form__studyname">
					{{ form.user_input.study_name.label() }}
					{{ form.user_input.study_name }}
					<div id="study_name_error_msg" class="error_msg" role="alert" style="display:none;"></div>
				</div>
				<div class="form__species">
					{{ form.user_input.species.label() }}
					{{ form.user_input.species }}
				</div>
				<div class="form__genome">
					{{ form.user_input.genome.label() }}
					{{ form.user_input.genome }}
				</div>
				<div class="form__build">
					{{ form.user_input.build.label() }}
					{{ form.user_input.build }}
				</div>
				<div class="form__hidden_guid">
					{{ form.user_input.guid(style="display:none;") }}
				</div>
				{{ form.user_input.csrf_token }}

				<input type="submit" class="form__submit__btn" name="OpenVar_submit" value="Run analysis">
				
			</form>

			<form class="form__upload" id="user_file_upload_form" method="POST" enctype="multipart/form-data">
				{{ form.file_upload.csrf_token }}
				{{ form.file_upload.vcf.label() }}
				{{ form.file_upload.vcf(accept=".vcf, .tsv, .txt, .csv") }}
				<input type="submit" class="submit__upload" id="upload_btn" name="upload_submit" value="Upload file">
			</form>

			<div id="progressBar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="display:none;">0%</div>

			<div id="upload_successAlert" class="alert__upload_success" role="alert" style="display:none;"></div>
			<div id="upload_errorAlert" class="alert__upload_error" role="alert" style="display:none;"></div>

			<div id="OPVsubmit_successAlert" class="alert__submit_success" style="display:none;" role="alert">
				<h1>Thank you for using OpenVar!</h1>
				<p>Your analysis has been added to the queue.</p>
				<p class='OPVsubmit_resultlink'>Your results will be available <a id="OPV_results_link" href='' title='Results page' target='_self'>here</a> for 10 days after completion of the analysis.</p>
				<p>If you use it for publication, please cite: REF OpenVar,<br>and consider citing OpenProt: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6323990/" title="Brunet et al, NAR, 2019" target="_blank">Brunet et al, 2019</a>.</p>
			</div>
		</div>

		<div class="footer">
			<div>If you have any question, please <a href="https://openprot.org/p/ng/contactUs" title="Contact us" target="_blank">contact us</a>.</div>
			<div><a href="https://twitter.com/intent/tweet?button_hashtag=OpenVar&ref_src=twsrc%5Etfw" class="twitter-hashtag-button" data-show-count="false">Tweet #OpenVar</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div>
			<div>
				<p>OpenVar was developped by members of Pr Xavier Roucou lab:<br>Dr Marie A Brunet, Sebastien Leblanc and Noe Guilloy.</p>
			</div>
			<div class="Sponsors">
				<img src="static/images/CIHR_chair.png" alt="CIHR Research Chair">
				<img src="static/images/Sherbrooke.jpg" alt="Universite de Sherbrooke">
				<img src="static/images/CalculQuebec.png" alt="Calcul Quebec">
				<img src="static/images/CalculCanada.png" alt="Calcul Canada">
			</div>
		</div>

		{% endblock %}

	</body>
</html>
